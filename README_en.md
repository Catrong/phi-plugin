<div align="center">

<a href="">
  <picture>
    <source srcset="https://github.com/user-attachments/assets/c18cd28c-220e-445d-9001-3f7a8f25ac51" type="image/avif" width="80%" />
    <img src="https://github.com/Catrong/phi-plugin/assets/117198625/731e11cb-71d3-4575-8c0d-b9cedcd442d4" width="80%" />
</picture>

[![phi-plugin](https://img.shields.io/badge/GitHub仓库-phi--plugin-9cf?style=for-the-badge&logo=github)](https://github.com/Catrong/phi-plugin)
[![phi-plugin](https://img.shields.io/badge/Gitee仓库-phi--plugin-9cf?style=for-the-badge&logo=gitee)](https://gitee.com/catrong/phi-plugin)

![version](https://img.shields.io/badge/%E7%89%88%E6%9C%AC-0.9.9.0-9cf?style=for-the-badge)

![version](https://img.shields.io/badge/Phigros-3.13.1-9cf?style=for-the-badge)

[![YunzaiBot](https://img.shields.io/badge/Yunzai-v3.0-9cf?style=for-the-badge&logo=dependabot)](https://gitee.com/yoimiya-kokomi/Yunzai-Bot)
[![MiaoYunzai](https://img.shields.io/badge/Miao--Yunzai-v3.0-9cf?style=for-the-badge&logo=dependabot)](https://gitee.com/yoimiya-kokomi/Miao-Yunzai)
[![TrssYunzai](https://img.shields.io/badge/TRSS--Yunzai-v3.0-9cf?style=for-the-badge&logo=dependabot)](https://gitee.com/TimeRainStarSky/Yunzai)
[![Guild](https://img.shields.io/badge/频道-Hutao114Pgr939-9cf?style=for-the-badge&logo=GroupMe)](https://pd.qq.com/s/e3z86q6bw)
[![Guild](https://img.shields.io/badge/频道-RkBwFBaRqa-9cf?style=for-the-badge&logo=Discord)](https://discord.gg/invite/RkBwFBaRqa)
[![Bilibili](https://img.shields.io/badge/Bilibili-就是不会告诉你-ff69b4?style=for-the-badge&logo=bilibili)](https://space.bilibili.com/403342249)
[![Stars](https://img.shields.io/github/stars/Catrong/phi-plugin?style=for-the-badge&color=yellow&label=Star)](../../stargazers)

### 中文 | [English](./README_en.md)

</div>

<br>

------

### Special Thanks

<table style="border-radius: 20px">
  <tbody style="border-radius: 20px">
    <tr>
        <td align="center" valign="top" width="10%"><a href="https://github.com/Walkersifolia"><img src="https://avatars.githubusercontent.com/u/129571444?v=4?s=100" style="border-radius: 50%" width="50px;" alt="圈圈"/><br /><sub><b>@Walkersifolia</b></sub></a><br /><a href="https://github.com/Catrong/phi-plugin/graphs/contributors/commits?author=Walkersifolia" title="Contributor">🌸</a></td>
        <td align="center" valign="top" width="10%"><a href="https://github.com/KeluIsAfkeru"><img src="https://avatars.githubusercontent.com/u/107661829?v=4?s=100" style="border-radius: 50%" width="50px;" alt="屑克鲁"/><br /><sub><b>@KeluIsAfkeru</b></sub></a><br /><a href="https://github.com/Catrong/phi-plugin/graphs/contributors/commits?author=KeluIsAfkeru" title="Contributor">🌸</a></td>
        <td align="center" valign="top" width="10%"><a href="https://github.com/S-t-e-v-e-e"><img src="https://avatars.githubusercontent.com/u/117198625?v=4?s=100" style="border-radius: 50%" width="50px;" alt="史蒂夫"/><br /><sub><b>@Steve~ɘvɘɈƧ</b></sub></a><br /><a href="https://github.com/Catrong/phi-plugin/graphs/contributors/commits?author=S-t-e-v-e-e" title="Contributor">🌸</a></td>
        <td align="center" valign="top" width="10%"><a href="https://github.com/7aGiven"><img src="https://avatars.githubusercontent.com/u/77519196?v=4?s=100" style="border-radius: 50%" width="50px;" alt="文酱"/><br /><sub><b>@7aGiven</b></sub></a><br /><a href="https://github.com/Catrong/phi-plugin/graphs/contributors/commits?author=7aGiven" title="Contributor">🌸</a></td>
        <td align="center" valign="top" width="10%"><a href="https://github.com/MYS-KISO"><img src="https://avatars.githubusercontent.com/u/101465504?v=4?s=100" style="border-radius: 50%" width="50px;" alt="MoistCrystal"/><br /><sub><b>@MoistCrystal</b></sub></a><br /><a href="https://github.com/Catrong/phi-plugin/graphs/contributors/commits?author=MYS-KISO" title="Contributor">🌸</a></td>
        <td align="center" valign="top" width="10%"><a href="https://github.com/yt6983138"><img src="https://avatars.githubusercontent.com/u/83499886?v=4?s=100" style="border-radius: 50%" width="50px;" alt="yt6983138"/><br /><sub><b>@static_void</b></sub></a><br /><a href="https://github.com/yt6983138" title="Contributor">🌸</a></td>
        <td align="center" valign="top" width="10%"><a href="https://github.com/wms26"><img src="https://avatars.githubusercontent.com/u/50258919?v=4?s=100" style="border-radius: 50%" width="50px;" alt="wms26"/><br /><sub><b>@千柒</b></sub></a><br /><a href="https://github.com/wms26" title="Contributor">🌸</a></td>
    </tr>
  </tbody>
</table>



### Contributions Thanks

<table style="border-radius: 20px">
  <tbody style="border-radius: 20px">
    <tr>
        <td align="center" valign="top" width="10%"><a href="https://github.com/qilinX88"><img src="https://avatars.githubusercontent.com/u/92022485?v=4?s=100" style="border-radius: 50%" width="50px;" alt="Loser_X"/><br /><sub><b>@Loser_X</b></sub></a><br /><a href="https://github.com/qilinX88" title="Contributor">🌸 20 🌸</a></td>
        <td align="center" valign="top" width="10%"><a href="https://github.com/S-t-e-v-e-e"><img src="https://github.com/S-t-e-v-e-e" style="border-radius: 50%" width="50px;" alt="史蒂夫"/><br /><sub><b>@Steve~ɘvɘɈƧ</b></sub></a><br /><a href="https://github.com/S-t-e-v-e-e" title="Contributor">🌸 40 🌸</a></td>
        <td align="center" valign="top" width="35%" nowrap="nowrap"><img src="https://pic1.afdiancdn.com/user/a743be34fb4e11ef81be52540025c377/avatar/a284c446cefded67dbbf0c14b9eda2a0_w1080_h1080_s115.jpeg?imageView2/1/w/240/h/240" style="border-radius: 50%" width="50px;" alt="溯洌RIPPLE"/><br /><sub><b>溯洌RIPPLE</b></sub><br/>🌸 25 🌸</td>
        <td align="center" valign="top" width="35%" nowrap="nowrap"><img src="https://pic1.afdiancdn.com/default/avatar/avatar-purple.png?imageView2/1/" style="border-radius: 50%" width="50px;" alt="祈"/><br /><sub><b>祈</b></sub><br/>🌸 5 🌸</td>
        <td align="center" valign="top" width="35%" nowrap="nowrap"><img src="https://pic1.afdiancdn.com/user/7f56847012a911f0853552540025c377/avatar/752eaae4cf8018a82719ea8f42569eae_w2000_h2000_s2699.png?imageView2/1/w/240/h/240" style="border-radius: 50%" width="50px;" alt="茗亿"/><br /><sub><b>茗亿</b></sub><br/>🌸 30 🌸</td>
    </tr>
  </tbody>
</table>

------

### Installation:

Run in the Yunzai directory

> Using Github

```
#Install the plugin
git clone --depth=1 https://github.com/Catrong/phi-plugin.git ./plugins/phi-plugin/
#Enter the plugin directory
cd ./plugins/phi-plugin/ 
#Install the required dependencies
pnpm install -P
```

> Using Gitee

```
git clone --depth=1 https://gitee.com/catrong/phi-plugin.git ./plugins/phi-plugin/
cd ./plugins/phi-plugin/
pnpm install -P
```

------

### Features

The following # can be replaced with /, and the command header can be customized

#### **The following are user functions**

| **Function Name** | **Function Description**
| :- | :-
| `#phi help` | Get help
| `#phi bind xxx` | Bind sessionToken
| `#phi unbind` | Delete sessionToken and archive records
| `#phi clean` | Delete all records
| `#phi update` | Update archive
| `#phi (rks\|pgr\|b30)` | Query rks, will provide the resulting b21 result
| `#phi p b30` | Same as above but arcaea
| `#phi info(1\|2)?` | Query personal statistics
| `#phi lmtacc [0-100]` | Calculate RKS after limiting the lowest ACC
| `#phi (lvsco(re)\|scolv) <difficulty range> <rank>` | Get interval scores
| `#phi chap <chapter name\|help>` | Get chapter scores
| `#phi list <difficulty range> <EZ\|HD\|IN\|AT> <NEW\|C\|B\|A\|S\|V\|FC\|PHI>` | Get interval scores for each song
| `#phi best1(+)` | Query text version b19 (or more), up to b99
| `#phi scor exxx` | Get single song score and push score suggestions for this song
| `#phi suggest` | Get the song that can make RKS +0.01 and the required ACC
| `#phi ranklist` | Get RKS leaderboard
| `#phi data` | Get user data quantity
| `#phi guess` | Guess the song, answer without special commands, reply directly, if it is not the song name, it will not speak, if it is an incorrect song name, it will reply. #ans end
| `#phi ltr` | Guess the song name based on the letters, #出/#open... open the specified letter, #第n个/#nX.xxx answer, #ans get the answer
| `#phi tipgame` | Guess the song name based on the prompt, #tip get the next prompt, #ans get the answer, answer directly reply
| `#phi song xxx` | Query a song in phigros, support setting aliases
| `#phi chart <song name> <difficulty>` | Query detailed information of a specific chart in Phigros
| `#phi (addtag\|subtag\|retag) <song name> <difficulty> <tag>` | Approve, oppose, or revoke a tag for a song. The default difficulty is IN
| `#phi (comment\|cmt\|review\|evaluate) <song name> <difficulty?> (newline) <content>` | Comment on a song. The default difficulty is IN
| `#phi recmt <comment ID>` | View and confirm whether to delete a comment. Only the sender and the owner have permission, and a second confirmation is required
| `#phi table <difficuty>` | phigros chart constant table (BiliBili @yuhao7370)
| `#phi new` | Query updated songs
| `#phi tips` | Random tips
| `#phi jrrp` | Today's fortune
| `#phi nick xxx` | Query the alias of a song
| `#phi rand [difficulty range] [rank]` | Random song based on conditions, conditions support difficulty, constant, difficulty can be multiple choices, constant is separated by -
| `#phi randclg [clg socre range] [rank] ([song's difficulty range])` | Random task eg: /rand 40 (IN 13-15)
| `#phi ill xxx` | Query the song illustration in phigros
| `#phi search <case value>` | Search for songs in the song library, support BPM constant amount, conditions bpm dif cmb, values can be intervals, separated by -
| `#phi theme [0-2]` | Switch drawing theme, only effective for b19 update
| `sign` | Sign in to get Notes
| `task` | View your tasks
| `retask` | Refresh tasks, need to spend 20Notes
| `#phi send <target> <num>` | Send Notes to the target, support @ or QQ number

#### **The following are management functions**

| Function Name | Function Description
| :- | :-
| `#phi backup (back)?` | Backup archive files, + back send the backup file, automatically saved in the /phi-plugin/backup/ directory
| `#phi restore` | Restore from backup, will not lose existing data, need to put the file in the /phi-plugin/backup/ directory
| `#phi(设置别名\|setnick) xxx ---> xxx` | Set an alias for a song, format is original name (or existing alias) ---> alias (will automatically filter the spaces on both sides of --->)
| `#phi(删除别名\|delnick) xxx` | Delete an alias for a song
| `#phi(强制\|qz)?(更新\|gx)` | Update this plugin
| `#phi repu` | Restart puppeteer
| `#下载曲绘\|down ill` | Download song illustrations to local
| `#phi get <名次>` | Get the sessionToken of a certain rank on the leaderboard
| `#phi del <sessionToken>` | Disable a sessionToken
| `#phi allow <sessionToken>` | Restore a sessionToken
| `#phi (set\|设置)<功能><值>` | Modify settings, it is recommended to view the function name first with /phi set, no spaces
| `#phi ban <功能>` | Disable a certain type of function, see the table below for details

##### Function parameter description

| Parameter | Function | Affected commands
| :- | :- | :-
| all | All functions | -.- 
| help | Help function | /help /tkhelp
| bind | Bind function | /bind /unbind
| b19 | Image score query function | /pgr /update /info /list /pb30 /score /lvsco /chap /suggest
| wb19 | Text score query function | /data /best
| song | Illustration function | /song /chart /ill /search /alias /rand /randclg /table /cmt /recmt /addtag /subtag /retag
| ranklist | Leaderboard function, will not disable user ranking | /ranklist /godlist
| fnc | Small functions | /com /tips /lmtacc /new
| tipgame | Tip guessing game | /tipgame
| guessgame | Guessing game | /guess
| ltrgame | Letter guessing game | /letter /ltr
| sign | Entertainment functions | /sign /send /task /retask /jrrp
| setting | System settings | /theme
| dan | Dan certification related | /dan /danupdate

------

<details><summary>Support my creation</summary>
<br>

[<img src="https://github.com/user-attachments/assets/8c181f08-a2b6-4e67-8b61-bd2e4027a6a4" width="400" />](https://afdian.com/a/Feijiang_)

Thank you for your support, your support is my greatest motivation for creation! The acknowledgment list may not be updated in time, welcome to urge me on QQ!</details>

#### Todo

* [ ] Optimize interface design

* [ ] Add illustrations of collectibles, avatars, etc.

* [ ] Play phi's songs

* [ ] Optimize QR code to get sessionToken

* [ ] Command to modify settings

* [ ] ...

------

### Friendly Links

[Yunzai-Bot Related Content Index](https://github.com/yhArcadia/Yunzai-Bot-plugins-index)

[Miao-Yunzai](https://github.com/yoimiya-kokomi/Miao-Yunzai/tree/master)

[TRSS-Yunzai](https://github.com/TimeRainStarSky/Yunzai)

------

### Preview

|Best19 Effect Picture<br><picture><source srcset="https://github.com/user-attachments/assets/63f5e474-c30a-4d66-8d10-402016bad61d" type="image/avif" width="80%" /><img src="https://github.com/user-attachments/assets/d7fab54d-293d-4a74-84cd-3e521ad3e242" width="80%" /></picture><br>Effect picture from [@Steve喵~](https://github.com/S-t-e-v-e-e) | Single Song Score Effect Picture<br><picture><source srcset="https://github.com/user-attachments/assets/8c723d88-2729-4f5e-baf7-644f5fdf9001" type="image/avif" width="60%" /><img src="https://github.com/user-attachments/assets/2201c185-1352-4b69-8649-c00d9756e1c5" width="60%"></picture><br>Effect picture from [@Steve喵~](https://github.com/S-t-e-v-e-e)<br><br>Single Song Score Effect Picture (Legacy)<br><picture><source srcset="https://github.com/user-attachments/assets/83296c38-2181-479f-ad26-dfb2e09bccf8" type="image/avif" width="60%" /><img src="https://github.com/Catrong/phi-plugin/assets/117198625/093e3d30-7f9e-48cb-9e12-bb9f0bb3b40c" width="60%"></picture><br>Effect picture from [@Steve喵~](https://github.com/S-t-e-v-e-e)<br><br>Single Song Illustration Effect Picture<br><picture><source srcset="https://github.com/user-attachments/assets/e332c88d-ecd0-49e7-aa6b-310645f14a5a" type="image/avif" width="60%" /><img src="https://github.com/Catrong/phi-plugin/assets/117198625/c6eb9694-8f72-4d3f-85d9-5120375b047b" width="60%"></picture> |
|:-------------------:|:------------------------:|
|Interval Score Effect Picture<br><picture><source srcset="https://github.com/user-attachments/assets/b1a4ff41-d26b-4ccc-942d-087797ff02b3" type="image/avif" /><img src="https://github.com/Catrong/phi-plugin/assets/117198625/411dff8e-ec93-4ebe-80ff-510105fd3f65"></picture><br>Effect picture from [@东城Eastown](https://space.bilibili.com/171389567) <br><br>Personal Information Effect Picture<br><picture><source srcset="https://github.com/user-attachments/assets/1361b1e9-510f-4140-a87d-a74b2ee70337" type="image/avif" /><img src="https://github.com/user-attachments/assets/ed20abfa-5bb1-4215-8b2b-8c5171126432"></picture><br>Effect picture from [@Steve喵~](https://github.com/S-t-e-v-e-e)|Personal Information Effect Picture (Legacy)<br><picture><source srcset="https://github.com/user-attachments/assets/c876119b-d98f-4751-85ba-675e6f2ba55f" type="image/avif" width="60%" /><img src="https://github.com/Catrong/phi-plugin/assets/117198625/9e536f1a-4cbe-41da-b2da-94d1bcd70488" width="60%"></picture><br>Effect picture from [@东城Eastown](https://space.bilibili.com/171389567)|

------

### Disclaimer

1. The functions are limited to internal communication and small-scale use. Please do not use `Yunzai-Bot` and `phi-Plugin` for any profit-making purposes.
2. Pictures and other materials are from the internet, only for communication and learning purposes. If there is any infringement, please contact us and we will delete it immediately.
3. The cloud archive is rewritten from [7aGiven/PhigrosLibrary](https://github.com/7aGiven/PhigrosLibrary/tree/v3.1.0)

------

Not written well, please be gentle...
